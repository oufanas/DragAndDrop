<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Drag & Drop Matem√°ticas Aleatorio</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
<style>
  body { font-family: 'Inter', sans-serif; background: #f0f4f8; display: flex; justify-content: center; padding: 40px; }
  .container { display: flex; gap: 40px; flex-wrap: wrap; max-width: 900px; }
  .panel { background: white; padding: 20px; border-radius: 20px; box-shadow: 0 6px 20px rgba(0,0,0,0.1); flex: 1; min-width: 250px; }
  h2 { margin-top: 0; color: #333; }
  .item { padding: 12px; margin-bottom: 12px; border-radius: 12px; background: #fbbf24; cursor: grab; text-align: center; font-weight: 600; color: #1f2937; transition: transform 0.2s; }
  .item:hover { transform: scale(1.05); }
  .box { height: 80px; border: 2px dashed #2563eb; border-radius: 15px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px; transition: background 0.3s, border-color 0.3s; font-weight: 600; font-size: 18px; }
  .box.occupied { border-style: solid; background: #dbeafe; }
  .msg { font-weight: 600; margin-top: 12px; min-height: 24px; text-align: center; font-size: 18px; }
  button { margin-top: 12px; padding: 8px 16px; border: none; background: #2563eb; color: white; border-radius: 12px; cursor: pointer; font-weight: 600; }
  button:hover { background: #1e40af; }
</style>
</head>
<body>
<div class="container">
  <div class="panel">
    <h2>Resultados</h2>
    <div id="items"></div>
    <button id="resetBtn">Reiniciar</button>
  </div>
  <div class="panel">
    <h2>Operaciones</h2>
    <div id="boxes"></div>
    <div id="msg" class="msg"></div>
  </div>
</div>

<script>
const itemsDiv = document.getElementById('items');
const boxesDiv = document.getElementById('boxes');
const msgDiv = document.getElementById('msg');
const resetBtn = document.getElementById('resetBtn');

let operations = [];
let items = [];
let placed = {};

// Funci√≥n para generar operaciones aleatorias simples
function generateOperations() {
  operations = [];
  for(let i=0; i<3; i++){
    const a = Math.floor(Math.random()*10)+1;
    const b = Math.floor(Math.random()*10)+1;
    operations.push({id: `box${i+1}`, expr: `${a} + ${b}`, result: a+b});
  }
}

// Funci√≥n para mezclar un array (Fisher-Yates)
function shuffleArray(array) {
  const arr = array.slice();
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random()*(i+1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  return arr;
}

// Renderizar cajas con operaciones
function renderBoxes() {
  boxesDiv.innerHTML = '';
  operations.forEach(op => {
    const box = document.createElement('div');
    box.className = 'box';
    box.id = op.id;
    box.textContent = op.expr;
    box.addEventListener('dragover', e=>e.preventDefault());
    box.addEventListener('drop', e=>handleDrop(e, op));
    boxesDiv.appendChild(box);
    placed[op.id] = false;
  });
}

// Renderizar valores (resultados) en orden aleatorio
function renderItems() {
  itemsDiv.innerHTML = '';
  const shuffled = shuffleArray(items);
  shuffled.forEach(value => {
    const div = document.createElement('div');
    div.className = 'item';
    div.draggable = true;
    div.id = `item${value}`;
    div.textContent = value;
    div.addEventListener('dragstart', e => e.dataTransfer.setData('text/plain', value));
    itemsDiv.appendChild(div);
  });
}

// Manejar drop
function handleDrop(e, op){
  e.preventDefault();
  const value = parseInt(e.dataTransfer.getData('text/plain'));
  if(op.result === value){
    const boxEl = document.getElementById(op.id);
    boxEl.textContent = `${op.expr} = ${value}`;
    boxEl.classList.add('occupied');
    const itemEl = document.getElementById(`item${value}`);
    if(itemEl) itemEl.remove();
    placed[op.id] = true;
    msgDiv.textContent = 'üéâ Correcto!';
    msgDiv.style.color = 'green';
    checkAllPlaced();
  } else {
    msgDiv.textContent = '‚ùå Incorrecto!';
    msgDiv.style.color = 'red';
  }
}

// Verificar si todas las operaciones est√°n completadas
function checkAllPlaced(){
  if(Object.values(placed).every(v=>v)){
    setTimeout(() => {
      msgDiv.textContent = '‚úÖ ¬°Muy bien! Nuevas operaciones...';
      generateNewRound();
    }, 500);
  }
}

// Generar nuevos valores y operaciones
function generateNewRound(){
  generateOperations();
  items = operations.map(op => op.result);
  renderBoxes();
  renderItems();
  msgDiv.textContent = '';
}

// Reset
resetBtn.addEventListener('click', generateNewRound);

// Inicializar primer juego
generateNewRound();
</script>
</body>
</html>
